<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=DM+Sans:wght@400;500;600;700&display=swap');
    :root {
      --bg0:#0c0c10; --bg1:#121218; --bg2:#1a1a24; --bg3:#22222e;
      --accent:#00d4aa; --accentDim:#00d4aa28; --accentGlow:#00d4aa55;
      --txt:#e4e4ed; --txt2:#8888a0; --txt3:#555570;
      --border:#272738; --r:10px;
      --danger:#ff4466; --warn:#ffaa33;
    }
    *{margin:0;padding:0;box-sizing:border-box}
    body{width:380px;min-height:480px;background:var(--bg0);color:var(--txt);font-family:'DM Sans',sans-serif;overflow-x:hidden}

    /* Header */
    .hdr{background:linear-gradient(135deg,var(--bg1),#161622);padding:16px 20px 14px;border-bottom:1px solid var(--border);position:relative;overflow:hidden}
    .hdr::after{content:'';position:absolute;top:-40%;right:-25%;width:110px;height:110px;background:radial-gradient(circle,var(--accentDim),transparent 70%);pointer-events:none}
    .hdr-row{display:flex;align-items:center;gap:12px;position:relative;z-index:1}
    .logo{width:34px;height:34px;background:linear-gradient(135deg,var(--accent),#00a888);border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:17px;box-shadow:0 3px 14px var(--accentDim)}
    .hdr h1{font-family:'JetBrains Mono',monospace;font-size:14px;font-weight:700;letter-spacing:-.3px}
    .hdr p{font-size:11px;color:var(--txt2);margin-top:1px}
    .ver{font-size:9px;color:var(--txt3);font-family:'JetBrains Mono',monospace;position:absolute;right:20px;top:50%;transform:translateY(-50%);z-index:1}

    /* Status */
    .status{display:flex;align-items:center;gap:8px;padding:9px 20px;background:var(--bg1);border-bottom:1px solid var(--border)}
    .dot{width:7px;height:7px;border-radius:50%;background:var(--txt3);transition:.3s}
    .dot.on{background:var(--accent);box-shadow:0 0 8px var(--accentGlow);animation:pulse 2s infinite}
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:.55}}
    .status span{font-size:11px;color:var(--txt2);font-family:'JetBrains Mono',monospace}

    /* Content */
    .content{padding:14px 20px}
    .sec-title{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:1.6px;color:var(--txt3);margin-bottom:8px;margin-top:14px}
    .sec-title:first-child{margin-top:0}

    /* Type grid */
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:7px}
    .card{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r);padding:10px 11px;cursor:pointer;transition:.15s;position:relative}
    .card:hover{background:var(--bg3);border-color:var(--accentDim);transform:translateY(-1px)}
    .card.sel{border-color:var(--accent);background:var(--accentDim)}
    .card .ico{font-size:18px;margin-bottom:4px}
    .card .lbl{font-size:11px;font-weight:600}
    .card .cnt{font-size:10px;color:var(--txt2);font-family:'JetBrains Mono',monospace;margin-top:1px}
    .card .chk{position:absolute;top:7px;right:7px;width:15px;height:15px;border-radius:50%;border:2px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:9px;transition:.15s}
    .card.sel .chk{background:var(--accent);border-color:var(--accent);color:var(--bg0)}

    /* Settings */
    .srow{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--border)}
    .srow:last-child{border:none}
    .srow label{font-size:11px;color:var(--txt2)}
    .sval{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--txt);background:var(--bg2);padding:3px 9px;border-radius:6px;border:1px solid var(--border);outline:none;width:110px}
    .tog{width:34px;height:18px;background:var(--border);border-radius:9px;cursor:pointer;position:relative;transition:.3s}
    .tog.on{background:var(--accent)}
    .tog::after{content:'';position:absolute;top:2px;left:2px;width:14px;height:14px;background:#fff;border-radius:50%;transition:.3s}
    .tog.on::after{left:18px}

    /* Buttons */
    .btn{width:100%;padding:11px;border-radius:var(--r);font-family:'DM Sans',sans-serif;font-size:12px;font-weight:700;cursor:pointer;transition:.15s;margin-top:8px;letter-spacing:.2px;border:none}
    .btn:disabled{opacity:.35;cursor:not-allowed;transform:none!important;box-shadow:none!important}
    .btn.primary{background:linear-gradient(135deg,var(--accent),#00b899);color:var(--bg0)}
    .btn.primary:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 5px 18px var(--accentDim)}
    .btn.secondary{background:var(--bg2);color:var(--txt);border:1px solid var(--border)}
    .btn.secondary:hover:not(:disabled){background:var(--bg3);border-color:var(--accentDim)}
    .btn.gallery{background:linear-gradient(135deg,#6c5ce7,#a855f7);color:#fff}
    .btn.gallery:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 5px 18px rgba(168,85,247,.3)}
    .btn.scan{background:var(--bg2);color:var(--accent);border:1px solid var(--accentDim)}
    .btn.scan:hover:not(:disabled){background:var(--accentDim)}

    /* Progress */
    .prog{display:none;margin-top:12px}
    .prog.on{display:block}
    .prog-bar{width:100%;height:5px;background:var(--bg2);border-radius:3px;overflow:hidden;margin-bottom:6px}
    .prog-fill{height:100%;background:linear-gradient(90deg,var(--accent),#00eebb);border-radius:3px;width:0%;transition:width .3s}
    .prog-info{display:flex;justify-content:space-between;font-size:10px;color:var(--txt2);font-family:'JetBrains Mono',monospace}

    /* Shortcuts */
    .shortcuts{margin-top:14px;padding-top:10px;border-top:1px solid var(--border)}
    .shortcut{display:flex;align-items:center;justify-content:space-between;padding:4px 0}
    .shortcut label{font-size:10px;color:var(--txt3)}
    .kbd{font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--txt2);background:var(--bg2);padding:2px 7px;border-radius:4px;border:1px solid var(--border)}

    /* Footer */
    .ftr{padding:10px 20px;border-top:1px solid var(--border);text-align:center}
    .ftr p{font-size:9px;color:var(--txt3);font-family:'JetBrains Mono',monospace}
  </style>
</head>
<body>
  <div class="hdr">
    <div class="hdr-row">
      <div class="logo">‚¨á</div>
      <div>
        <h1>TG Media Grabber</h1>
        <p>Descarga multimedia de Telegram</p>
      </div>
    </div>
    <span class="ver">v2.0</span>
  </div>

  <div class="status">
    <div class="dot" id="dot"></div>
    <span id="statusTxt">Detectando Telegram Web...</span>
  </div>

  <div class="content">
    <div class="sec-title">Tipo de media</div>
    <div class="grid">
      <div class="card sel" data-type="photos"><div class="chk">‚úì</div><div class="ico">üì∏</div><div class="lbl">Fotos</div><div class="cnt" id="cPhotos">‚Äî</div></div>
      <div class="card sel" data-type="videos"><div class="chk">‚úì</div><div class="ico">üé¨</div><div class="lbl">Videos</div><div class="cnt" id="cVideos">‚Äî</div></div>
      <div class="card sel" data-type="gifs"><div class="chk">‚úì</div><div class="ico">üé≠</div><div class="lbl">GIFs</div><div class="cnt" id="cGifs">‚Äî</div></div>
      <div class="card sel" data-type="docs"><div class="chk">‚úì</div><div class="ico">üìé</div><div class="lbl">Archivos</div><div class="cnt" id="cDocs">‚Äî</div></div>
    </div>

    <div class="sec-title">Acciones</div>
    <button class="btn gallery" id="btnGallery">üé® Escanear + Galer√≠a Preview</button>
    <button class="btn primary" id="btnBulk">‚¨á Descargar todo del chat</button>
    <button class="btn scan" id="btnScan">üîç Scan r√°pido (solo visible)</button>

    <div class="sec-title">Configuraci√≥n</div>
    <div class="srow"><label>Carpeta</label><input class="sval" id="folder" value="TG_Media" placeholder="TG_Media"></div>
    <div class="srow"><label>Contenido restringido</label><div class="tog on" id="togRestrict"></div></div>
    <div class="srow"><label>Botones en chat</label><div class="tog on" id="togButtons"></div></div>

    <div class="prog" id="prog">
      <div class="prog-bar"><div class="prog-fill" id="progFill"></div></div>
      <div class="prog-info"><span id="progTxt">0 / 0</span><span id="progPct">0%</span></div>
    </div>

    <div class="shortcuts">
      <div class="sec-title" style="margin-top:0">Atajos de teclado</div>
      <div class="shortcut"><label>Descargar actual</label><span class="kbd">Ctrl+Shift+D</span></div>
      <div class="shortcut"><label>Abrir galer√≠a</label><span class="kbd">Ctrl+Shift+G</span></div>
    </div>
  </div>

  <div class="ftr"><p>v2.0.0 ‚Äî Hecho por Daniel üöÄ</p></div>

  <script src="js/popup.js"></script>
</body>
</html>
